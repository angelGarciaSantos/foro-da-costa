(this["webpackJsonpforo-da-costa"]=this["webpackJsonpforo-da-costa"]||[]).push([[0],{65:function(e,t,c){},66:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c.n(n),a=c(19),o=c.n(a),r=c(23),i=c(11),l=c(15),j=c(29),d=c.n(j),b=(c(28),c(2)),u=function(e){var t=e.post,c=t.user,n=t._id,s=t.title,a=(t.content,t.date),o=d()(a).format("DD/MM/YYYY");return Object(b.jsxs)("li",{className:"tc pa3 center b--dashed bw1 b--black-30 dim mv2",onClick:function(){return e.openPostDetailProps(n)},children:[Object(b.jsx)("p",{className:"courier f4",children:s}),Object(b.jsxs)("p",{className:"courier f5",children:["por ",c,", ",o," "]})]})},p=function(e){return Object(b.jsx)("ul",{children:e.posts.map((function(t){return Object(b.jsx)(u,{post:t,openPostDetailProps:e.openPostDetailProps},t._id)}))})},h=c(7),m=c(74),O=c(76),f=c(73),x=function(e){return Object(b.jsxs)(m.a,{bg:"light",expand:"lg",children:[Object(b.jsxs)(m.a.Brand,{className:"courier",href:"#/",children:[Object(b.jsx)("i",{class:"fi-rr-glasses"}),"Foro da Costa"]}),Object(b.jsx)(m.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(b.jsx)(m.a.Collapse,{id:"basic-navbar-nav",children:Object(b.jsxs)(O.a,{className:"mr-auto",children:[Object(b.jsx)(O.a.Link,{href:"#/",className:"courier",children:"Inicio"}),Object(b.jsx)(O.a.Link,{href:"#link",className:"courier",children:"Mensajes"}),Object(b.jsxs)(f.a,{title:"Opciones",id:"basic-nav-dropdown",className:"courier",children:[Object(b.jsx)(f.a.Item,{href:"#action/3.1",children:"Action"}),Object(b.jsx)(f.a.Item,{href:"#action/3.2",children:"Another action"}),Object(b.jsx)(f.a.Item,{href:"#action/3.3",children:"Something"}),Object(b.jsx)(f.a.Divider,{}),Object(b.jsx)(f.a.Item,{href:"#action/3.4",children:"Separated link"})]})]})})]})},g=(c.p,function(e){var t=e.getPostById(Object(h.g)().id),c=t.user,n=t._id,s=t.title,a=t.content,o=t.date,r=d()(o).format("DD/MM/YYYY");return Object(b.jsxs)("div",{className:"tc pa3 center b--dashed bw1 b--black-30 dim ma4",children:[Object(b.jsx)("p",{className:"courier f4 tc",children:s}),Object(b.jsx)("p",{className:"courier f5",children:a}),Object(b.jsxs)("p",{className:"courier f6 tc",children:["por ",c,", ",r," "]}),Object(b.jsx)("a",{className:"courier f6 link dim ba ph3 pv2 mb2 dib mid-gray",onClick:e.deletePost.bind(undefined,n),children:"Eliminar"})]})}),N=c(43),v=c(48),P=function(e){var t=Object(v.a)(),c=t.register,n=t.handleSubmit,s=t.watch,a=t.formState.errors;return console.log(s("title")),console.log(s("content")),Object(b.jsxs)("form",{className:"courier tc",onSubmit:n((function(t){console.log(t),e.createNewPost(t)})),children:[Object(b.jsx)("label",{className:"courier pa3",children:"Titulo"}),Object(b.jsx)("input",Object(N.a)({className:"courier"},c("title",{required:!0}))),a.title&&Object(b.jsx)("span",{children:"Debes introducir un t\xedtulo"}),Object(b.jsx)("label",{className:"courier pa3",children:"Contenido"}),Object(b.jsx)("input",Object(N.a)({className:"courier"},c("content",{required:!0}))),a.content&&Object(b.jsx)("span",{children:"Debes introducir alg\xfan contenido"}),Object(b.jsx)("input",{className:"courier",type:"submit"})]})},k=c(75),D=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),c=t[0],s=t[1],a=Object(h.f)();var o=function(){console.log("Obteniendo info del API"),fetch("https://api-rest-example-21.herokuapp.com/api/post").then((function(e){return e.json()})).then((function(e){return console.log("Posts received: ".concat(e.posts)),s(e.posts),e.posts}))};return Object(n.useEffect)((function(){o()}),[]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(x,{}),Object(b.jsxs)(h.c,{children:[Object(b.jsxs)(h.a,{exact:!0,path:"/",children:[Object(b.jsx)(p,{posts:c,openPostDetailProps:function(e){a.push("/post/".concat(e))}}),Object(b.jsx)("div",{className:"tc",children:Object(b.jsx)("a",{className:"courier f6 link dim ba ph3 pv2 mb2 dib mid-gray",onClick:function(){a.push("/new")},children:"Crear nuevo tema"})})]}),Object(b.jsx)(h.a,{path:"/post/:id",children:Object(b.jsx)(g,{getPostById:function(e){var t=-1;return c.map((function(c){c._id==e&&(t=c)})),t},deletePost:function(e){console.log("Deleting post: ".concat(e)),fetch("https://api-rest-example-21.herokuapp.com/api/post/".concat(e),{method:"DELETE"}).then((function(e){return e.text()})).then((function(e){console.log(e),o(),a.push("/")}))}})}),Object(b.jsx)(h.a,{path:"/new",children:Object(b.jsx)(P,{createNewPost:function(e){var t=new Date,n={id:Object(k.a)(),title:e.title,content:e.content,user:"An\xf3nimo",date:t};s([].concat(Object(i.a)(c),[n]));var r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};fetch("https://api-rest-example-21.herokuapp.com/api/post",r).then((function(e){return e.json()})).then((function(e){o(),a.push("/")}))}})})]})]})};c(64),c(65);o.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(r.a,{children:Object(b.jsx)(D,{})})}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.cbbd6f03.chunk.js.map